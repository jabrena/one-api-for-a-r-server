<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <script src="https://unpkg.com/htmx.org@1.7.0/dist/htmx.min.js"></script>
</head>
<body>
    <h1>Java & R Integration examples</h1>
    <p>
        This document shows few examples interacting with R.
    </p>
    <hr />
    <h2>Fetch an image generated by R</h2>
    <p>
        <img src="/image" />
    </p>
    <h2>Receive results</h2>
    <div id="demo">
        <!-- The content will be replaced by the response from the server -->
    </div>
    <button hx-get="/demo" hx-target="#demo">Load Data</button>

    <hr />
    <h2>Send data & receive results</h2>
    <p>
        WIP
    </p>
    <div id="demo2">
        <!-- The content will be replaced by the response from the server -->
    </div>
    <script>
        function sendRequest() {
            var payload = JSON.stringify({a: 4, b: 5});
            
            fetch('/sum', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: payload
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('demo2').innerText = 'Sum: ' + data.sum;
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    </script>
    <button type="button" onclick="sendRequest()">Calculate Sum</button>
    
</body>
</html>
